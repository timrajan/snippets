 API Team: Location Preference Not Persisting - Action Required                                                                                                                                                 
                                                                                                                                                                                                                 
  Issue: Per-user location preferences are not being saved, causing location settings to leak between users.                                                                                                     
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  The Problem                                                                                                                                                                                                    
                                                                                                                                                                                                                 
  When User A selects "USA - California" and logs out, then User B logs in and selects "Japan - Tokyo", when User A logs back in, they incorrectly see "Japan - Tokyo" instead of their saved "USA - California" 
  location.                                                                                                                                                                                                      
                                                                                                                                                                                                                 
  Root Cause: The selected_location_preset_id field is not being stored/returned by the API.                                                                                                                     
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  What's Happening                                                                                                                                                                                               
                                                                                                                                                                                                                 
  1. User A logs in and selects "USA - California"                                                                                                                                                               
  2. Desktop app sends PUT /settings with {"selected_location_preset_id": "us_california"}                                                                                                                       
  3. API ignores this field (not implemented)                                                                                                                                                                    
  4. User A logs out, User B logs in and selects "Japan - Tokyo"                                                                                                                                                 
  5. User A logs back in                                                                                                                                                                                         
  6. Desktop app calls GET /settings                                                                                                                                                                             
  7. API returns settings WITHOUT selected_location_preset_id                                                                                                                                                    
  8. Desktop app has no way to restore User A's location preference                                                                                                                                              
  9. User A sees wrong location (or previous user's location)                                                                                                                                                    
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Required API Changes                                                                                                                                                                                           
                                                                                                                                                                                                                 
  Endpoint: GET /settings and PUT /settings                                                                                                                                                                      
  ┌─────────────────────────────┬────────┬────────────┬──────────────────────────────────────────────────────────────┐                                                                                           
  │            Field            │  Type  │  Default   │                         Description                          │                                                                                           
  ├─────────────────────────────┼────────┼────────────┼──────────────────────────────────────────────────────────────┤                                                                                           
  │ selected_location_preset_id │ string │ "detected" │ User's selected location for geolocation/timezone simulation │                                                                                           
  └─────────────────────────────┴────────┴────────────┴──────────────────────────────────────────────────────────────┘                                                                                           
  Database:                                                                                                                                                                                                      
  ALTER TABLE user_settings                                                                                                                                                                                      
  ADD COLUMN selected_location_preset_id VARCHAR(50) DEFAULT 'detected';                                                                                                                                         
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Expected Behavior After Fix                                                                                                                                                                                    
                                                                                                                                                                                                                 
  PUT /settings Request:                                                                                                                                                                                         
  {                                                                                                                                                                                                              
    "selected_location_preset_id": "us_california"                                                                                                                                                               
  }                                                                                                                                                                                                              
                                                                                                                                                                                                                 
  GET /settings Response:                                                                                                                                                                                        
  {                                                                                                                                                                                                              
    "selected_location_preset_id": "us_california",                                                                                                                                                              
    ... other fields ...                                                                                                                                                                                         
  }                                                                                                                                                                                                              
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Valid Values                                                                                                                                                                                                   
  ┌─────────────────┬──────────────────────────────────────┐                                                                                                                                                     
  │      Value      │               Meaning                │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "detected"      │ Auto-detect from user's IP (default) │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "us_california" │ San Francisco, USA                   │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "us_newyork"    │ New York, USA                        │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "uk_london"     │ London, UK                           │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "fr_paris"      │ Paris, France                        │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "de_berlin"     │ Berlin, Germany                      │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "in_mumbai"     │ Mumbai, India                        │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "in_bangalore"  │ Bangalore, India                     │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "jp_tokyo"      │ Tokyo, Japan                         │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ "au_sydney"     │ Sydney, Australia                    │                                                                                                                                                     
  ├─────────────────┼──────────────────────────────────────┤                                                                                                                                                     
  │ Any string      │ Custom locations ("custom_abc123")   │                                                                                                                                                     
  └─────────────────┴──────────────────────────────────────┘                                                                                                                                                     
  ---                                                                                                                                                                                                            
  Why This Matters                                                                                                                                                                                               
                                                                                                                                                                                                                 
  The location simulation feature allows testers to:                                                                                                                                                             
  - Simulate geolocation (GPS coordinates)                                                                                                                                                                       
  - Simulate timezone (for date/time testing)                                                                                                                                                                    
  - Test location-based features from different countries                                                                                                                                                        
                                                                                                                                                                                                                 
  Without per-user persistence, testers cannot reliably use this feature in a multi-user environment.                                                                                                            
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Verification Steps                                                                                                                                                                                             
                                                                                                                                                                                                                 
  After implementation, please verify:                                                                                                                                                                           
                                                                                                                                                                                                                 
  # 1. Save location preference                                                                                                                                                                                  
  curl -X PUT /settings -d '{"selected_location_preset_id": "fr_paris"}'                                                                                                                                         
                                                                                                                                                                                                                 
  # 2. Retrieve and confirm it's returned                                                                                                                                                                        
  curl -X GET /settings                                                                                                                                                                                          
  # Should return: {"selected_location_preset_id": "fr_paris", ...}                                                                                                                                              
                                                                                                                                                                                                                 
  # 3. Test with different user - should have independent value                                                                                                                                                  
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Priority: High - Feature is broken without this                                                                                                                                                                
  Effort: Low - Just one string field to store/return                                                                                                                                                            
                                                                                                                                                                                                                 
  Please let me know if you have any questions. 
