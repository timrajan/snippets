 Request to API Team: Multi-Tenant Workspace Isolation                                                                                                                                                          
                                                                                                                                                                                                                 
  Root Cause of the Bug                                                                                                                                                                                          
                                                                                                                                                                                                                 
  When a user (e.g., sundar@gmail.com) who belongs to multiple teams (Team A and Team B) switches between workspaces:                                                                                            
  - Test cases created in Team A appear in Team B                                                                                                                                                                
  - Settings configured in Team A appear in Team B                                                                                                                                                               
  - All workspace-specific data is leaking between teams                                                                                                                                                         
                                                                                                                                                                                                                 
  Root Cause: The frontend was not sending the workspace context with API requests. We have now fixed this on the frontend by sending an X-Workspace-Id header with every authenticated API request.             
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Frontend Fix (Already Implemented)                                                                                                                                                                             
                                                                                                                                                                                                                 
  The frontend now includes this header in all authenticated API requests:                                                                                                                                       
                                                                                                                                                                                                                 
  X-Workspace-Id: <workspace-uuid>                                                                                                                                                                               
                                                                                                                                                                                                                 
  Example:                                                                                                                                                                                                       
  GET /api/v1/test-plans                                                                                                                                                                                         
  Authorization: Bearer <jwt-token>                                                                                                                                                                              
  X-Workspace-Id: 550e8400-e29b-41d4-a716-446655440000                                                                                                                                                           
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Questions for API Team                                                                                                                                                                                         
                                                                                                                                                                                                                 
  1. Have you implemented workspace-based filtering using this header?                                                                                                                                           
    - If yes, what header name do you expect? (X-Workspace-Id, X-Workspace, Workspace-Id, etc.)                                                                                                                  
    - If no, can you implement this?                                                                                                                                                                             
  2. Should workspace filtering apply to ALL endpoints or only specific ones?                                                                                                                                    
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Complete List of API Endpoints That Need Workspace Isolation                                                                                                                                                   
                                                                                                                                                                                                                 
  Test Plans & Test Cases (HIGH PRIORITY - user reported this issue)                                                                                                                                             
  ┌────────┬─────────────────────┬───────────────────────┐                                                                                                                                                       
  │ Method │      Endpoint       │      Description      │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ GET    │ /test-plans         │ List all test plans   │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /test-plans         │ Create test plan      │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /folders            │ Create folder         │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /folders/reorder    │ Reorder folders       │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /test-cases         │ Create test case      │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /test-cases/reorder │ Reorder test cases    │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /test-recordings    │ Create test recording │                                                                                                                                                       
  ├────────┼─────────────────────┼───────────────────────┤                                                                                                                                                       
  │ POST   │ /test-scripts       │ Create test script    │                                                                                                                                                       
  └────────┴─────────────────────┴───────────────────────┘                                                                                                                                                       
  Variables                                                                                                                                                                                                      
  ┌────────┬────────────────────┬───────────────────────────────┐                                                                                                                                                
  │ Method │      Endpoint      │          Description          │                                                                                                                                                
  ├────────┼────────────────────┼───────────────────────────────┤                                                                                                                                                
  │ GET    │ /variables/global  │ Get global variables          │                                                                                                                                                
  ├────────┼────────────────────┼───────────────────────────────┤                                                                                                                                                
  │ POST   │ /variables/global  │ Create/update global variable │                                                                                                                                                
  ├────────┼────────────────────┼───────────────────────────────┤                                                                                                                                                
  │ GET    │ /variables/resolve │ Resolve variable values       │                                                                                                                                                
  └────────┴────────────────────┴───────────────────────────────┘                                                                                                                                                
  Test Runs & Results                                                                                                                                                                                            
  ┌────────┬─────────────────────────┬─────────────────────────┐                                                                                                                                                 
  │ Method │        Endpoint         │       Description       │                                                                                                                                                 
  ├────────┼─────────────────────────┼─────────────────────────┤                                                                                                                                                 
  │ POST   │ /test-runs              │ Create test run         │                                                                                                                                                 
  ├────────┼─────────────────────────┼─────────────────────────┤                                                                                                                                                 
  │ GET    │ /test-runs              │ List test runs          │                                                                                                                                                 
  ├────────┼─────────────────────────┼─────────────────────────┤                                                                                                                                                 
  │ POST   │ /test-run-results       │ Save test run results   │                                                                                                                                                 
  ├────────┼─────────────────────────┼─────────────────────────┤                                                                                                                                                 
  │ GET    │ /test-run-tree          │ Get test run tree       │                                                                                                                                                 
  ├────────┼─────────────────────────┼─────────────────────────┤                                                                                                                                                 
  │ POST   │ /test-run-tree/folders  │ Create test run folder  │                                                                                                                                                 
  ├────────┼─────────────────────────┼─────────────────────────┤                                                                                                                                                 
  │ POST   │ /test-run-tree/testruns │ Create test run in tree │                                                                                                                                                 
  └────────┴─────────────────────────┴─────────────────────────┘                                                                                                                                                 
  Schedules                                                                                                                                                                                                      
  ┌────────┬────────────────────┬───────────────────────┐                                                                                                                                                        
  │ Method │      Endpoint      │      Description      │                                                                                                                                                        
  ├────────┼────────────────────┼───────────────────────┤                                                                                                                                                        
  │ POST   │ /schedules         │ Create schedule       │                                                                                                                                                        
  ├────────┼────────────────────┼───────────────────────┤                                                                                                                                                        
  │ GET    │ /schedules         │ List schedules        │                                                                                                                                                        
  ├────────┼────────────────────┼───────────────────────┤                                                                                                                                                        
  │ GET    │ /schedules/pending │ Get pending schedules │                                                                                                                                                        
  └────────┴────────────────────┴───────────────────────┘                                                                                                                                                        
  Defects                                                                                                                                                                                                        
  ┌────────┬───────────────────────────┬───────────────────────┐                                                                                                                                                 
  │ Method │         Endpoint          │      Description      │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ GET    │ /defects                  │ List defects          │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ POST   │ /defects                  │ Create defect         │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ PATCH  │ /defects/batch            │ Batch update defects  │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ DELETE │ /defects/batch            │ Batch delete defects  │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ GET    │ /defects/statistics       │ Get defect statistics │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ GET    │ /defects/folders          │ Get defect folders    │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ POST   │ /defects/folders          │ Create defect folder  │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ GET    │ /defects/filters          │ Get saved filters     │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ POST   │ /defects/filters          │ Create saved filter   │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ GET    │ /defects/filter-templates │ Get filter templates  │                                                                                                                                                 
  ├────────┼───────────────────────────┼───────────────────────┤                                                                                                                                                 
  │ GET    │ /defects/export/json      │ Export defects        │                                                                                                                                                 
  └────────┴───────────────────────────┴───────────────────────┘                                                                                                                                                 
  Reports                                                                                                                                                                                                        
  ┌────────┬─────────────────────┬─────────────────────────┐                                                                                                                                                     
  │ Method │      Endpoint       │       Description       │                                                                                                                                                     
  ├────────┼─────────────────────┼─────────────────────────┤                                                                                                                                                     
  │ POST   │ /reports/suite-runs │ Create suite run report │                                                                                                                                                     
  ├────────┼─────────────────────┼─────────────────────────┤                                                                                                                                                     
  │ GET    │ /reports/suite-runs │ Get suite run reports   │                                                                                                                                                     
  └────────┴─────────────────────┴─────────────────────────┘                                                                                                                                                     
  Settings (user reported this issue too)                                                                                                                                                                        
  ┌────────┬─────────────────────────────┬─────────────────────────────┐                                                                                                                                         
  │ Method │          Endpoint           │         Description         │                                                                                                                                         
  ├────────┼─────────────────────────────┼─────────────────────────────┤                                                                                                                                         
  │ GET    │ /settings                   │ Get user settings           │                                                                                                                                         
  ├────────┼─────────────────────────────┼─────────────────────────────┤                                                                                                                                         
  │ PUT    │ /settings                   │ Update user settings        │                                                                                                                                         
  ├────────┼─────────────────────────────┼─────────────────────────────┤                                                                                                                                         
  │ POST   │ /settings/reset             │ Reset settings to defaults  │                                                                                                                                         
  ├────────┼─────────────────────────────┼─────────────────────────────┤                                                                                                                                         
  │ POST   │ /settings/integrations/test │ Test integration connection │                                                                                                                                         
  └────────┴─────────────────────────────┴─────────────────────────────┘                                                                                                                                         
  Workspace                                                                                                                                                                                                      
  ┌────────┬───────────────────────────┬────────────────────────────┐                                                                                                                                            
  │ Method │         Endpoint          │        Description         │                                                                                                                                            
  ├────────┼───────────────────────────┼────────────────────────────┤                                                                                                                                            
  │ GET    │ /workspaces/current/usage │ Get workspace usage/limits │                                                                                                                                            
  └────────┴───────────────────────────┴────────────────────────────┘                                                                                                                                            
  Auth (No workspace filtering needed)                                                                                                                                                                           
  ┌────────┬───────────────────────┬──────────────────┐                                                                                                                                                          
  │ Method │       Endpoint        │   Description    │                                                                                                                                                          
  ├────────┼───────────────────────┼──────────────────┤                                                                                                                                                          
  │ POST   │ /auth/logout          │ Logout           │                                                                                                                                                          
  ├────────┼───────────────────────┼──────────────────┤                                                                                                                                                          
  │ GET    │ /auth/me              │ Get current user │                                                                                                                                                          
  ├────────┼───────────────────────┼──────────────────┤                                                                                                                                                          
  │ POST   │ /auth/change-password │ Change password  │                                                                                                                                                          
  └────────┴───────────────────────┴──────────────────┘                                                                                                                                                          
  ---                                                                                                                                                                                                            
  Expected Behavior After Fix                                                                                                                                                                                    
                                                                                                                                                                                                                 
  1. When X-Workspace-Id header is present:                                                                                                                                                                      
    - Filter all data by that workspace                                                                                                                                                                          
    - Return only data belonging to that workspace                                                                                                                                                               
    - Create new data associated with that workspace                                                                                                                                                             
  2. When X-Workspace-Id header is missing or empty (Personal Workspace):                                                                                                                                        
    - Use user's personal workspace                                                                                                                                                                              
    - Or return 400 error if workspace is required                                                                                                                                                               
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Priority                                                                                                                                                                                                       
                                                                                                                                                                                                                 
  HIGH - This is a data isolation/security issue. Users can see other teams' data.                                                                                                                               
                                                                                                                                                                                                                 
  ---                                                                                                                                                                                                            
  Please confirm:                                                                                                                                                                                                
  1. Is X-Workspace-Id the correct header name?                                                                                                                                                                  
  2. Which endpoints already support this?                                                                                                                                                                       
  3. Timeline for implementing workspace filtering on remaining endpoints?   
